# 实验报告

## 设计

大部份电路部件都与《数字设计和计算机体系结构》书中差不多，但是由于多了几条指令，一些地方需要作出一定的更改。

书中译码阶段使用了两个译码器先后进行译码操作，另一种方案是同时根据 Op 和 Funct 字段分别译码，获得 AluCtl，然后通过二选一多路选择器来根据指令是否为 R-Type 从二者中进行选择，获得正确的 AluCtl。在实验中，我使用书中提供的译码方法，通过两个译码器先后译码，获得所需 AluCtl。原先书中使用了两位的 AluOp，标记第一次译码的结果，但是由于多添加了几条指令，两位已经不足以标记结果了，所以我将其扩充到三位，同时让它的结果直接与实际的 AluCtl 对应起来，除了 R-Type 使用 `2‘b011` 表示无操作，之后根据 AluOp 是否为 `2’b001` 来判断是否是 R-Type 指令从而决定是否需要进一步地译码。

针对 `andi` 和 `ori` 指令，需要使用无符号扩展，所以扩展有符号扩展和无符号扩展。我使用 `ExtOp` 控制符号和无符号扩展，1 为符号扩展。

对于 `beq` 和 `bne` 指令，我使用控制位 `Bne` 与 `Zero` 结果进行异或操作，得到是否需要跳转 `ToJump`，取代原来与 `Branch` 相与的 `Zero`
